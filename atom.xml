<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>崔伟</title>
  
  <subtitle>崔伟的博客</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.cuiweii.com/"/>
  <updated>2019-06-21T13:44:07.680Z</updated>
  <id>http://www.cuiweii.com/</id>
  
  <author>
    <name>崔伟</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>test</title>
    <link href="http://www.cuiweii.com/uncategorized/f/"/>
    <id>http://www.cuiweii.com/uncategorized/f/</id>
    <published>2019-06-21T13:44:07.000Z</published>
    <updated>2019-06-21T13:44:07.680Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><p>### </p><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><p><em>fffa</em><br><img src="/images/2019/06/21/92b937a0-942a-11e9-8e96-5bcbbf488d25.jpg" alt="u=2825026237,3255635426fm=26gp=0.jpg"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一级标题&quot;&gt;&lt;a href=&quot;#一级标题&quot; class=&quot;headerlink&quot; title=&quot;一级标题&quot;&gt;&lt;/a&gt;一级标题&lt;/h1&gt;&lt;h2 id=&quot;二级标题&quot;&gt;&lt;a href=&quot;#二级标题&quot; class=&quot;headerlink&quot; title=&quot;二级标题&quot;&gt;&lt;/a
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://www.cuiweii.com/uncategorized/hello-world/"/>
    <id>http://www.cuiweii.com/uncategorized/hello-world/</id>
    <published>2019-06-09T15:00:39.365Z</published>
    <updated>2019-06-09T15:00:39.367Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>如何通过ORACLE函数计算截止日期</title>
    <link href="http://www.cuiweii.com/ORACLE/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87ORACLE%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E6%88%AA%E6%AD%A2%E6%97%A5%E6%9C%9F/"/>
    <id>http://www.cuiweii.com/ORACLE/如何通过ORACLE函数计算截止日期/</id>
    <published>2019-06-09T12:21:38.000Z</published>
    <updated>2019-06-21T13:47:59.490Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ORACLE计算一个日期加上指定工作日之后的时间"><a href="#ORACLE计算一个日期加上指定工作日之后的时间" class="headerlink" title="ORACLE计算一个日期加上指定工作日之后的时间"></a>ORACLE计算一个日期加上指定工作日之后的时间</h1><p>​    我们开发过程中经常需要计算截止日期，如果是简单向后数几天这种都很简单，但是一旦涉及到计算工作日(除法定节假日及周六日)，就比较麻烦了。</p><h2 id="建立一张法定节假日及调休相关情况表。"><a href="#建立一张法定节假日及调休相关情况表。" class="headerlink" title="建立一张法定节假日及调休相关情况表。"></a>建立一张法定节假日及调休相关情况表。</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for T_CONF_CALENDAR</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> (</span><br><span class="line">  <span class="string">"KID_RLJLH"</span> VARCHAR2(<span class="number">50</span> <span class="keyword">BYTE</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  <span class="string">"MC"</span> VARCHAR2(<span class="number">100</span> <span class="keyword">BYTE</span>) ,</span><br><span class="line">  <span class="string">"DM"</span> <span class="built_in">DATE</span> ,</span><br><span class="line">  <span class="string">"NF"</span> <span class="built_in">NUMBER</span> ,</span><br><span class="line">  <span class="string">"YF"</span> <span class="built_in">NUMBER</span> ,</span><br><span class="line">  <span class="string">"RQ"</span> <span class="built_in">NUMBER</span> ,</span><br><span class="line">  <span class="string">"XQ"</span> VARCHAR2(<span class="number">50</span> <span class="keyword">BYTE</span>) ,</span><br><span class="line">  <span class="string">"SFJJR"</span> <span class="built_in">NUMBER</span> </span><br><span class="line">)</span><br><span class="line"><span class="keyword">TABLESPACE</span> <span class="string">"ZWFWPT"</span></span><br><span class="line"><span class="keyword">LOGGING</span></span><br><span class="line"><span class="keyword">NOCOMPRESS</span></span><br><span class="line">PCTFREE <span class="number">10</span></span><br><span class="line"><span class="keyword">INITRANS</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">STORAGE</span> (</span><br><span class="line">  <span class="keyword">INITIAL</span> <span class="number">65536</span> </span><br><span class="line">  <span class="keyword">NEXT</span> <span class="number">1048576</span> </span><br><span class="line">  <span class="keyword">MINEXTENTS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">PARALLEL</span> <span class="number">1</span></span><br><span class="line">NOCACHE</span><br><span class="line"><span class="keyword">DISABLE</span> <span class="keyword">ROW</span> <span class="keyword">MOVEMENT</span></span><br><span class="line">;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"KID_RLJLH"</span> <span class="keyword">IS</span> <span class="string">'日历记录号'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"MC"</span> <span class="keyword">IS</span> <span class="string">'名称'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"DM"</span> <span class="keyword">IS</span> <span class="string">'代码'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"NF"</span> <span class="keyword">IS</span> <span class="string">'年份'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"YF"</span> <span class="keyword">IS</span> <span class="string">'月份'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"RQ"</span> <span class="keyword">IS</span> <span class="string">'日期'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"XQ"</span> <span class="keyword">IS</span> <span class="string">'星期'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">COLUMN</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span>.<span class="string">"SFJJR"</span> <span class="keyword">IS</span> <span class="string">'是否节假日 0节假日 1调休上班日'</span>;</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="keyword">ON</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> <span class="keyword">IS</span> <span class="string">'配置表-日历配置表'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Primary Key structure for table T_CONF_CALENDAR</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"SYS_C0068227"</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"KID_RLJLH"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Checks structure for table T_CONF_CALENDAR</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"SYS_C0068222"</span> <span class="keyword">CHECK</span> (<span class="string">"KID_RLJLH"</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>) <span class="keyword">NOT</span> DEFERRABLE <span class="keyword">INITIALLY</span> <span class="keyword">IMMEDIATE</span> <span class="keyword">NORELY</span> <span class="keyword">VALIDATE</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"SYS_C0068223"</span> <span class="keyword">CHECK</span> (<span class="string">"KID_RLJLH"</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>) <span class="keyword">NOT</span> DEFERRABLE <span class="keyword">INITIALLY</span> <span class="keyword">IMMEDIATE</span> <span class="keyword">NORELY</span> <span class="keyword">VALIDATE</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"SYS_C0068224"</span> <span class="keyword">CHECK</span> (<span class="string">"KID_RLJLH"</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>) <span class="keyword">NOT</span> DEFERRABLE <span class="keyword">INITIALLY</span> <span class="keyword">IMMEDIATE</span> <span class="keyword">NORELY</span> <span class="keyword">VALIDATE</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"SYS_C0068225"</span> <span class="keyword">CHECK</span> (<span class="string">"KID_RLJLH"</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>) <span class="keyword">NOT</span> DEFERRABLE <span class="keyword">INITIALLY</span> <span class="keyword">IMMEDIATE</span> <span class="keyword">NORELY</span> <span class="keyword">VALIDATE</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZWFWPT_ZBBA"</span>.<span class="string">"T_CONF_CALENDAR"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"SYS_C0068226"</span> <span class="keyword">CHECK</span> (<span class="string">"KID_RLJLH"</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>) <span class="keyword">NOT</span> DEFERRABLE <span class="keyword">INITIALLY</span> <span class="keyword">IMMEDIATE</span> <span class="keyword">NORELY</span> <span class="keyword">VALIDATE</span>;</span><br></pre></td></tr></table></figure><p>​    这里我已经添加了一些节假日及调休记录，如下图所示：</p><p><img src="https://raw.githubusercontent.com/cuiweii/FigureBed/master/img/%E6%97%A5%E5%8E%86%E9%85%8D%E7%BD%AE%E8%A1%A8%E6%88%AA%E5%9B%BE.png" alt></p><h2 id="判断一个日期是工作日的条件是什么，工作日必须同时满足以下几个条件："><a href="#判断一个日期是工作日的条件是什么，工作日必须同时满足以下几个条件：" class="headerlink" title="判断一个日期是工作日的条件是什么，工作日必须同时满足以下几个条件："></a>判断一个日期是工作日的条件是什么，工作日必须同时满足以下几个条件：</h2><p>​    <strong>非法定节假日</strong>并且<strong>非周六周日</strong>或者<strong>是调休上班日</strong>。</p><p>​    非法定节假日判断(只需要判断日期是否存在于日历配置表中并且为法定节假日)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">SYSDATE</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">DUAL </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">SYSDATE</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">0</span> )</span><br></pre></td></tr></table></figure><p>​    非周六日判断，这里给出判断SQL，Oracle判断周六日可以参考这篇文章</p><p><a href="https://www.cnblogs.com/zhangyangtao/p/9817503.html" target="_blank" rel="noopener">oracle判断日期不在周六周日</a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">SYSDATE</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">DUAL </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">TO_CHAR(<span class="keyword">SYSDATE</span>,<span class="string">'D'</span>) <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">7</span>)</span><br></pre></td></tr></table></figure><p>​    是调休上班日</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">SYSDATE</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">DUAL </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">SYSDATE</span> <span class="keyword">IN</span> （<span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">1</span>）</span><br></pre></td></tr></table></figure><p>​    综合三个条件使用AND、OR连接条件后得到判断工作日SQL语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">DAY_ID </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">( <span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span> DAY_ID <span class="keyword">FROM</span> DUAL ) </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">TO_CHAR ( DAY_ID, <span class="string">'D'</span> ) <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="number">1</span>, <span class="number">7</span> ) </span><br><span class="line"><span class="keyword">AND</span> DAY_ID <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">0</span> ) </span><br><span class="line"><span class="keyword">OR</span> DAY_ID <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">1</span> )</span><br></pre></td></tr></table></figure><h2 id="通过数据库函数来实现计算工作日的功能"><a href="#通过数据库函数来实现计算工作日的功能" class="headerlink" title="通过数据库函数来实现计算工作日的功能"></a>通过数据库函数来实现计算工作日的功能</h2><p>​    思路是自定义一个函数<strong>FUNC_GETDEADLINE</strong>,输入两个变量<strong>INPUTDATE</strong>（输入日期）和<strong>DAY_OFFSET</strong>（计算DAY_OFFSET个工作日后的日期），通过WHILE循环，如果判断一个日期为工作日则将工作日数量加1，直到达到DAY_OFFSET个工作日，然后跳出WHILE循环返回计算得到的工作日日期。</p><p>​    这里有一种特殊的判断，传入的DAY_OFFSET为正数时我们可以理解为计算DAY_OFFSET个工作日之后的日期，传入的DAY_OFFSET为负数时又该如何理解呢？既然为正数是向后推算，那么为负数则可理解为计算DAY_OFFSET个工作日之前的日期，所以函数中多了一个ELSE判断用于处理这种情况。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span></span><br><span class="line"><span class="keyword">FUNCTION</span> FUNC_GETDEADLINE (INPUTDATE  <span class="built_in">DATE</span>, DAY_OFFSET  <span class="built_in">NUMBER</span>)</span><br><span class="line"><span class="keyword">RETURN</span> <span class="built_in">DATE</span></span><br><span class="line"><span class="keyword">IS</span> </span><br><span class="line">CURR_OFFSET <span class="built_in">NUMBER</span> := <span class="number">0</span>;</span><br><span class="line">IS_WORK_DAY NUMBER;</span><br><span class="line">CURR_DATE DATE;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">IF</span>(INPUTDATE = <span class="literal">NULL</span>) </span><br><span class="line"><span class="keyword">THEN</span> <span class="keyword">RETURN</span> <span class="literal">NULL</span>;</span><br><span class="line">ELSE CURR_DATE := INPUTDATE;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line">IF DAY_OFFSET = 0</span><br><span class="line">THEN</span><br><span class="line">RETURN TO_DATE(TO_CHAR(INPUTDATE,'YYYY-MM-DD'),'YYYY-MM-DD');</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line">IF DAY_OFFSET &gt; 0</span><br><span class="line">THEN</span><br><span class="line">WHILE CURR_OFFSET &lt; DAY_OFFSET LOOP</span><br><span class="line">CURR_DATE:=CURR_DATE + 1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="number">0</span>) <span class="keyword">INTO</span> IS_WORK_DAY <span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span> CURR_DATE DAY_ID <span class="keyword">FROM</span> DUAL</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> TO_CHAR ( DAY_ID, <span class="string">'D'</span> ) <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="number">1</span>, <span class="number">7</span> ) </span><br><span class="line"><span class="keyword">AND</span> DAY_ID <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">0</span> ) </span><br><span class="line"><span class="keyword">OR</span> DAY_ID <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">IF(IS_WORK_DAY = 1)</span><br><span class="line">THEN </span><br><span class="line">CURR_OFFSET := CURR_OFFSET + 1;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br><span class="line">ELSE </span><br><span class="line">WHILE CURR_OFFSET &gt; DAY_OFFSET LOOP</span><br><span class="line">CURR_DATE := CURR_DATE - 1;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="number">0</span>) <span class="keyword">INTO</span> IS_WORK_DAY <span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span> CURR_DATE DAY_ID <span class="keyword">FROM</span> DUAL</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> TO_CHAR ( DAY_ID, <span class="string">'D'</span> ) <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="number">1</span>, <span class="number">7</span> ) </span><br><span class="line"><span class="keyword">AND</span> DAY_ID <span class="keyword">NOT</span> <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">0</span> ) </span><br><span class="line"><span class="keyword">OR</span> DAY_ID <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> DM <span class="keyword">FROM</span> T_CONF_CALENDAR <span class="keyword">WHERE</span> SFJJR = <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">IF(IS_WORK_DAY = 1)</span><br><span class="line">THEN </span><br><span class="line">CURR_OFFSET := CURR_OFFSET - 1;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line">RETURN TO_DATE(TO_CHAR(CURR_DATE,'YYYY-MM-DD'),'YYYY-MM-DD');</span><br><span class="line"><span class="keyword">END</span> FUNC_GETDEADLINE;</span><br></pre></td></tr></table></figure><p>第一次写博客，有一些表述不太到位的地方，欢迎留言交流！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ORACLE计算一个日期加上指定工作日之后的时间&quot;&gt;&lt;a href=&quot;#ORACLE计算一个日期加上指定工作日之后的时间&quot; class=&quot;headerlink&quot; title=&quot;ORACLE计算一个日期加上指定工作日之后的时间&quot;&gt;&lt;/a&gt;ORACLE计算一个日期加上
      
    
    </summary>
    
      <category term="ORACLE" scheme="http://www.cuiweii.com/categories/ORACLE/"/>
    
    
      <category term="ORACLE" scheme="http://www.cuiweii.com/tags/ORACLE/"/>
    
  </entry>
  
  <entry>
    <title>blog</title>
    <link href="http://www.cuiweii.com/ORACLE/blog/"/>
    <id>http://www.cuiweii.com/ORACLE/blog/</id>
    <published>2019-06-09T12:18:34.000Z</published>
    <updated>2019-06-09T15:00:39.365Z</updated>
    
    <content type="html"><![CDATA[<h1 id="这是我的第一篇博文"><a href="#这是我的第一篇博文" class="headerlink" title="这是我的第一篇博文"></a>这是我的第一篇博文</h1><blockquote><p>这是一个引用</p></blockquote><p>这是一个表格</p><table><thead><tr><th>12212</th><th>22222</th><th>2111</th></tr></thead><tbody><tr><td>飞</td><td>啊</td><td>地方</td></tr><tr><td>是</td><td>飞</td><td>打打</td></tr><tr><td>飞</td><td>飞</td><td>飞</td></tr></tbody></table><p>这是一段代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Hello World!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$$ {牛顿第二定律}<br>F = ma<br>$$ {力是改变物体运动状态的原因}</p><p>这是一个有序列表</p><ol><li>ddd</li><li>方法</li><li>ffda</li><li>444aa</li></ol><p>这是一个无序列表</p><ul><li>附加2</li><li>发的发就爱</li><li>22fda</li></ul><ul><li><input disabled type="checkbox"> fffad</li><li><input disabled type="checkbox"> aaaaa</li></ul><p>fffd</p><hr><p>[TOC]</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;这是我的第一篇博文&quot;&gt;&lt;a href=&quot;#这是我的第一篇博文&quot; class=&quot;headerlink&quot; title=&quot;这是我的第一篇博文&quot;&gt;&lt;/a&gt;这是我的第一篇博文&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;这是一个引用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这
      
    
    </summary>
    
      <category term="ORACLE" scheme="http://www.cuiweii.com/categories/ORACLE/"/>
    
    
      <category term="ORACLE" scheme="http://www.cuiweii.com/tags/ORACLE/"/>
    
  </entry>
  
</feed>
